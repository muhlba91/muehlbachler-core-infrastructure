frr defaults traditional
hostname {{ .hostname }}
log syslog warnings
!
route-map ALLOW-ALL permit 100
exit
!
route-map DENY-ALL deny 100
exit
!
router bgp {{ .bgp.localAsn }}
 bgp router-id {{ .bgp.routerId }}
 no bgp ebgp-requires-policy
 no bgp default ipv4-unicast
{{- range .bgp.neighbors }}
 neighbor {{ .address }} remote-as {{ .asn }}
 ! neighbor {{ .address }} password {{ .password }}
 neighbor {{ .address }} interface {{ .interface }}
 neighbor {{ .address }} timers 60 180
 neighbor {{ .address }} disable-connected-check
 neighbor {{ .address }} soft-reconfiguration inbound
{{- end }}
 !
 address-family ipv4 unicast
{{- range .bgp.advertisedIPv4Networks }}
  network {{ . }}
{{- end }}
{{- range .bgp.neighbors }}
  neighbor {{ .address }} activate
  neighbor {{ .address }} next-hop-self
  neighbor {{ .address }} route-map ALLOW-ALL in
  neighbor {{ .address }} route-map ALLOW-ALL out
{{- end }}
 exit-address-family
 !
 address-family ipv6 unicast
{{- range .bgp.advertisedIPv6Networks }}
  network {{ . }}
{{- end }}
{{- range .bgp.neighbors }}
  neighbor {{ .address }} activate
  neighbor {{ .address }} next-hop-self
  neighbor {{ .address }} route-map ALLOW-ALL in
  neighbor {{ .address }} route-map ALLOW-ALL out
{{- end }}
 exit-address-family
exit
!
