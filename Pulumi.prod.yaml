secretsprovider: gcpkms://projects/public-services-402810/locations/europe/keyRings/infrastructure-encryption/cryptoKeys/infrastructure-encryption
encryptedkey: CiQAvgA/tyBZt88Xdmm+im4ibCb9idFa+suojwtEbzRwVmHan8MSSQB99kCJOr4l1Xd8lSHHRfbhKEpKQcHMFXrXiEPRY7/u3o8xZb+t83xTuwxLS4HGleEzPZIL2hC/lBqoCgpCzj+qhFi2fqNl8EE=
config:
  muehlbachler-core-infrastructure:bucketId: infrastructure-assets-87d6dbd4-4928-4cdc-8d9d-2b19417489d9
  muehlbachler-core-infrastructure:gcp:
    encryptionKey:
      cryptoKeyId: infrastructure-encryption
      keyringId: infrastructure-encryption
      location: europe
    project: public-services-402810
    region: europe-west4
  muehlbachler-core-infrastructure:network:
    name: infrastructure-services
    cidr: 10.21.0.0/16
    subnetCidr: 10.21.0.0/24
    firewallRules:
      http:
        description: Allow incoming HTTP traffic
        port: 80
        protocol: tcp
      https:
        description: Allow incoming HTTPS traffic
        port: 443
        protocol: tcp
      vault:
        description: Allow incoming Vault traffic
        port: 8200
        protocol: tcp
      wireguard:
        description: Allow incoming Wireguard (user) traffic
        port: 65000
        protocol: udp
      wireguard-mesh:
        description: Allow incoming Wireguard (tuxnet-mesh) traffic
        port: 65001
        protocol: udp
      wireguard-wg1:
        description: Allow incoming Wireguard (wg1) traffic
        port: 65101
        protocol: udp
      wireguard-wg3:
        description: Allow incoming Wireguard (wg3) traffic
        port: 65301
        protocol: udp
      wireguard-wg2:
        description: Allow incoming Wireguard (wg2) traffic
        port: 65201
        protocol: udp
    dnsSuffix: de.hetzner.muehlbachler.io
  muehlbachler-core-infrastructure:oidc:
    discoveryUrl: https://muehlbachler-mhvy5g.zitadel.cloud
    clients:
      wireguard:
        clientId:
          secure: v1:fj3xTxb9Kp4jvzCu:adzvM79yKUqJsDYHvWt4QpWz/nynLzVdLpVoJScTInEh3w==
        clientSecret:
          secure: v1:XW8JpKsCOffKqUm+:iH3urhf/phyXa6hZjAJBlvD1GlLQeKt48NcbQ00Gf0FN4v9bce4jZQFEtbAH2e52E4QLQfjgBtvsmqg3CZ6EuWXI7NtHeVeHTZSrCSVfDSc=
  muehlbachler-core-infrastructure:server:
    location: fsn1
    type: cx22
    ipv4: 10.21.0.10
    publicSsh: true
  muehlbachler-core-infrastructure:dns:
    project: muehlbachler-dns
    email: postmaster@muehlbachler.io
    entries: {vault: {zoneId: muehlbachler-io, domain: vault.platform.muehlbachler.io}, wireguard: {zoneId: muehlbachler-io, domain: vpn.platform.muehlbachler.io}}
  muehlbachler-core-infrastructure:bgp:
    routerId: 10.254.1.1
    localAsn: 65000
    interface: wg0
    advertisedIPv4Networks:
      - 10.254.1.0/30
      - 10.254.2.0/30
      - 10.254.3.0/30
    neighbors:
      - remoteAsn: 65111
        address: fd80::254:1:1
        interface: wg1
        interfaceName: wg1
      - remoteAsn: 65221
        address: fd80::254:2:1
        interface: wg2
        interfaceName: wg2
      - remoteAsn: 65331
        address: fd80::254:3:1
        interface: wg3
        interfaceName: wg3
    interfaceName: wg0
  muehlbachler-core-infrastructure:tailscale:
    authKey:
      secure: v1:jA/QT10wLkNbjLg4:t76dqKbE4c/NQdDbCy17g5UHIdk0NrUcnJpSYgIZhmQpi6eXzgPnsqRDkR3mU+/+9vHcZ3UXmXbE6SCy87y0SD7bo1ZJUNc5yOKDDts=
  muehlbachler-core-infrastructure:backupBucketId: infrastructure-backups-87d6dbd4-4928-4cdc-8d9d-2b19417489d9
